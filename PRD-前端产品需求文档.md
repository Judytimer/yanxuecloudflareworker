# 前端产品需求文档 (PRD)
## AI 学习辅导聊天助手 - 前端部分

**项目名称：** Antech Learning Assistant  
**域名：** antech.store  
**版本：** v1.0  
**日期：** 2024

---

## 1. 项目概述

### 1.1 产品定位
一个面向厌学孩子的AI聊天辅导平台，通过温和、理解的方式帮助孩子重新发现学习的意义和乐趣。

### 1.2 核心价值
- **理解**：AI能够理解孩子的情绪和困难
- **鼓励**：提供积极的引导和支持
- **引导**：帮助孩子找到学习的内在动力
- **专业**：参考专业心理辅导网站的设计理念

### 1.3 目标用户
- 主要用户：厌学或学习困难的孩子（8-18岁）
- 次要用户：关注孩子学习的家长

---

## 2. 设计规范

### 2.1 色彩系统（BetterHelp风格）

#### 主色调
```
主绿色：#4CAF50 / #5CB85C
深绿色：#388E3C（强调、按钮）
浅绿色：#E8F5E9（背景、卡片背景）
```

#### 中性色
```
白色：#FFFFFF（卡片背景、文字）
浅灰：#F5F5F5（页面背景）
中灰：#757575（次要文字、图标）
深灰：#212121（主要文字、标题）
```

#### 功能色
```
链接蓝：#2196F3（链接、次要按钮）
警告橙：#FF9800（CTA按钮，可选）
错误红：#F44336（错误提示）
成功绿：#4CAF50（成功提示）
```

### 2.2 字体规范

#### 字体族
- **中文：** 思源黑体 / 苹方 / PingFang SC
- **英文/数字：** Inter / Roboto / -apple-system

#### 字号层级
```
H1 标题：32px / 2rem（页面主标题）
H2 标题：24px / 1.5rem（卡片标题）
H3 标题：20px / 1.25rem（小节标题）
正文：16px / 1rem（主要文字）
小字：14px / 0.875rem（辅助文字）
极小：12px / 0.75rem（提示文字）
```

#### 字重
```
标题：600-700（SemiBold/Bold）
正文：400（Regular）
强调：500（Medium）
```

#### 行高
```
标题：1.2
正文：1.6
段落：1.8
```

### 2.3 间距系统
```
基础单位：8px

间距值：
- xs: 4px
- sm: 8px
- md: 16px
- lg: 24px
- xl: 32px
- xxl: 48px
```

### 2.4 圆角规范
```
小圆角：4px（按钮、标签）
中圆角：8px（输入框）
大圆角：12px（卡片）
超大圆角：16px（聊天窗口）
```

### 2.5 阴影规范
```
卡片阴影：0 2px 8px rgba(0, 0, 0, 0.1)
悬浮阴影：0 4px 12px rgba(0, 0, 0, 0.15)
聊天窗口阴影：0 8px 24px rgba(0, 0, 0, 0.2)
```

---

## 3. 页面结构

### 3.1 整体布局

```
┌─────────────────────────────────────────┐
│           Header (固定顶部)              │
│  Logo | 导航菜单 | CTA按钮              │
├─────────────────────────────────────────┤
│                                         │
│         Hero Section (首屏)             │
│  大标题 + 副标题 + 主要CTA              │
│                                         │
├─────────────────────────────────────────┤
│                                         │
│       Features Section (功能介绍)       │
│  ┌──────┐  ┌──────┐  ┌──────┐         │
│  │卡片1 │  │卡片2 │  │卡片3 │         │
│  └──────┘  └──────┘  └──────┘         │
│                                         │
├─────────────────────────────────────────┤
│                                         │
│       Content Section (内容区域)        │
│  更多介绍卡片、用户评价等               │
│                                         │
├─────────────────────────────────────────┤
│           Footer (页脚)                 │
│  资源链接 | 联系方式 | 版权信息         │
└─────────────────────────────────────────┘
                    │
                    │ 右下角
                    ▼
            ┌─────────────┐
            │ 💬 聊天按钮 │ ← 悬浮按钮
            └─────────────┘
```

### 3.2 Header 组件

#### 布局
- **左侧：** Logo + 品牌名称
- **中间：** 导航菜单（首页 | 关于 | 资源）
- **右侧：** CTA按钮（"开始对话"）

#### 样式
- 高度：64px
- 背景：白色，带轻微阴影
- 固定定位：滚动时保持在顶部
- 响应式：移动端显示汉堡菜单

#### 交互
- Logo点击：返回首页
- 导航菜单：平滑滚动到对应区域
- CTA按钮：打开聊天窗口

### 3.3 Hero Section

#### 内容
- **主标题：** "找到学习的乐趣"
- **副标题：** "与AI导师对话，重新发现学习的意义"
- **描述文字：** 简短介绍（1-2句话）
- **CTA按钮：** "开始对话"（主要按钮）

#### 样式
- 背景：渐变（浅绿到白色）或柔和插画
- 高度：视口高度的60-70%（约500-600px）
- 内容居中
- 文字颜色：深灰

#### 交互
- CTA按钮点击：打开聊天窗口
- 平滑滚动动画

### 3.4 Features Section（功能介绍卡片）

#### 卡片内容（3个卡片）

**卡片1：理解**
- 图标：💙 或 心形图标
- 标题："理解你的感受"
- 描述："AI能够倾听并理解你在学习上遇到的困难"

**卡片2：鼓励**
- 图标：💚 或 星星图标
- 标题："给予积极引导"
- 描述："用温和的方式帮助你重新找到学习的动力"

**卡片3：成长**
- 图标：🌱 或 成长图标
- 标题："陪伴你成长"
- 描述："持续的支持和鼓励，陪伴你度过学习难关"

#### 卡片样式
- 背景：白色
- 圆角：12px
- 阴影：卡片阴影
- 内边距：24px
- 间距：卡片之间16px
- 响应式：移动端单列，桌面端3列

#### 交互
- 悬浮效果：轻微上浮 + 阴影加深
- 点击：可跳转到详细介绍（可选）

### 3.5 Footer

#### 内容
- **左侧：** 品牌信息 + Logo
- **中间：** 快速链接（关于 | 隐私政策 | 使用条款）
- **右侧：** 联系方式（邮箱 | 社交媒体）

#### 样式
- 背景：浅灰 (#F5F5F5)
- 文字颜色：中灰
- 内边距：32px
- 文字大小：14px

---

## 4. AI 聊天窗口设计

### 4.1 悬浮按钮

#### 位置
- 固定定位：右下角
- 距离底部：24px
- 距离右侧：24px
- Z-index：1000

#### 样式
```
尺寸：64px × 64px
形状：圆形
背景：主绿色 (#4CAF50)
图标：💬 或 消息图标（白色）
阴影：悬浮阴影
```

#### 状态
- **默认：** 显示聊天图标
- **有未读消息：** 显示红色圆点提示
- **悬浮：** 阴影加深，轻微放大（1.05倍）
- **打开：** 按钮隐藏，显示关闭按钮

#### 交互
- 点击：展开聊天窗口
- 悬浮：显示提示文字"开始对话"

### 4.2 聊天窗口（展开状态）

#### 布局结构
```
┌─────────────────────────────┐
│  ┌─────────────────────────┐ │
│  │ 聊天窗口标题栏          │ │
│  │ "AI学习伙伴" | [关闭]  │ │
│  ├─────────────────────────┤ │
│  │                         │ │
│  │   对话区域（可滚动）    │ │
│  │                         │ │
│  │   [欢迎消息]            │ │
│  │   [用户消息]            │ │
│  │   [AI回复]              │ │
│  │                         │ │
│  ├─────────────────────────┤ │
│  │ 输入区域                │ │
│  │ [输入框] [发送按钮]     │ │
│  └─────────────────────────┘ │
└─────────────────────────────┘
```

#### 尺寸与位置
- **桌面端：**
  - 宽度：400px
  - 高度：600px（最大）
  - 位置：右下角，距离边缘24px
- **移动端：**
  - 宽度：100vw（全屏）
  - 高度：100vh（全屏）
  - 位置：全屏覆盖

#### 窗口样式
- 背景：白色
- 圆角：16px（顶部）
- 阴影：聊天窗口阴影
- 边框：无（或极细边框）

### 4.3 标题栏

#### 内容
- **左侧：** 头像图标 + "AI学习伙伴"
- **右侧：** 关闭按钮（×）

#### 样式
- 高度：56px
- 背景：浅绿 (#E8F5E9)
- 内边距：16px
- 边框底部：1px 浅灰

#### 交互
- 关闭按钮：关闭聊天窗口
- 可拖拽移动（可选功能）

### 4.4 对话区域

#### 布局
- 高度：自适应（总高度 - 标题栏 - 输入区域）
- 内边距：16px
- 滚动：垂直滚动，自动滚动到底部
- 背景：白色

#### 消息气泡设计

**用户消息（右侧）：**
```
样式：
- 对齐：右对齐
- 背景：#4CAF50（主绿色）
- 文字：白色
- 圆角：左上、右上、右下 12px
- 最大宽度：70%
- 内边距：12px 16px
- 间距：消息之间 12px
```

**AI消息（左侧）：**
```
样式：
- 对齐：左对齐
- 背景：白色
- 文字：#212121（深灰）
- 边框：1px #E0E0E0
- 圆角：左上、左下、右下 12px
- 最大宽度：70%
- 内边距：12px 16px
- 左侧：显示小头像图标（可选）
```

**系统消息（居中）：**
```
样式：
- 对齐：居中
- 背景：透明
- 文字：#757575（中灰）
- 字号：12px
- 斜体：是
- 内容：如"AI正在输入..."
```

#### 时间戳
- 位置：消息下方
- 样式：12px，中灰
- 显示：超过5分钟的消息显示时间

### 4.5 输入区域

#### 布局
```
┌─────────────────────────────────┐
│ [输入框（占满宽度）] [发送按钮] │
└─────────────────────────────────┘
```

#### 输入框样式
- 高度：48px
- 圆角：24px（完全圆角）
- 边框：1px #E0E0E0
- 内边距：12px 16px
- 占位符："告诉我你的想法..."
- 字体：16px

#### 输入框状态
- **默认：** 浅灰边框
- **聚焦：** 绿色边框 (#4CAF50)，阴影
- **禁用：** 灰色背景，不可输入

#### 发送按钮
- 尺寸：48px × 48px
- 形状：圆形
- 背景：主绿色 (#4CAF50)
- 图标：发送图标（白色）
- 位置：输入框右侧，内联

#### 按钮状态
- **默认：** 主绿色
- **悬浮：** 深绿色 (#388E3C)
- **禁用：** 浅灰，不可点击（输入为空时）
- **发送中：** 显示加载动画

### 4.6 快捷回复（可选功能）

#### 位置
- 输入框上方
- 仅在对话开始时显示

#### 内容
```
预设问题：
- "我最近不想学习"
- "学习压力很大"
- "不知道为什么要学习"
- "想聊聊学习方法"
```

#### 样式
- 按钮样式：浅绿背景，深绿文字
- 圆角：20px
- 内边距：8px 16px
- 间距：按钮之间 8px
- 点击后：隐藏快捷回复，发送对应消息

---

## 5. 交互逻辑

### 5.1 聊天窗口打开/关闭

#### 打开流程
1. 用户点击悬浮按钮或CTA按钮
2. 显示遮罩层（半透明黑色，opacity: 0.5）
3. 聊天窗口从右下角滑入（动画300ms）
4. 自动聚焦输入框
5. 显示欢迎消息（如果首次打开）

#### 关闭流程
1. 用户点击关闭按钮或遮罩层
2. 聊天窗口滑出（动画300ms）
3. 遮罩层淡出
4. 保存对话历史到本地存储

### 5.2 消息发送流程

```
1. 用户输入文字
   ↓
2. 点击发送按钮（或按Enter）
   ↓
3. 验证输入（非空，长度限制）
   ↓
4. 显示用户消息气泡（立即）
   ↓
5. 显示"AI正在输入..."指示器
   ↓
6. 发送请求到后端（GraphQL）
   ↓
7. 接收AI回复
   ↓
8. 隐藏输入指示器
   ↓
9. 显示AI回复消息（打字动画，可选）
   ↓
10. 滚动到底部
    ↓
11. 保存到对话历史
```

### 5.3 错误处理

#### 网络错误
- 显示错误提示："网络连接失败，请稍后重试"
- 重试按钮：允许用户重新发送

#### 服务器错误
- 显示错误提示："服务暂时不可用，请稍后再试"
- 错误消息样式：红色文字，浅红背景

#### 输入验证错误
- 空输入：发送按钮禁用
- 超长输入：显示字符计数，限制500字

### 5.4 加载状态

#### AI思考中
- 显示"AI正在思考..."消息
- 显示打字指示器动画（三个点跳动）

#### 消息发送中
- 发送按钮显示加载动画
- 禁用输入框和发送按钮

---

## 6. 响应式设计

### 6.1 断点设置
```
移动端：< 768px
平板端：768px - 1024px
桌面端：> 1024px
```

### 6.2 移动端适配

#### Header
- 显示汉堡菜单
- Logo和CTA按钮保留
- 导航菜单折叠

#### Hero Section
- 高度：视口高度的80%
- 文字大小：适当缩小
- 按钮：全宽或接近全宽

#### Features Section
- 卡片：单列布局
- 间距：增加垂直间距

#### 聊天窗口
- 全屏显示
- 标题栏：显示返回按钮（替代关闭）
- 输入区域：固定在底部

### 6.3 平板端适配
- 介于移动端和桌面端之间
- 卡片：2列布局
- 聊天窗口：保持右下角，尺寸适中

---

## 7. 性能要求

### 7.1 加载性能
- 首屏加载时间：< 2秒
- 聊天窗口打开：< 300ms
- 消息发送响应：< 100ms（UI反馈）

### 7.2 动画性能
- 所有动画：60fps
- 使用CSS transform和opacity（GPU加速）
- 避免layout和paint操作

### 7.3 资源优化
- 图片：WebP格式，懒加载
- 代码：代码分割，按需加载
- 字体：字体子集化，preload

---

## 8. 技术栈

### 8.1 前端框架
- **React 18+**：UI框架
- **TypeScript**：类型安全
- **Vite**：构建工具

### 8.2 状态管理
- **React Context**：全局状态（聊天窗口状态）
- **React Hooks**：组件状态管理

### 8.3 样式方案
- **Tailwind CSS**：工具类CSS（推荐）
- 或 **CSS Modules**：模块化CSS
- **CSS-in-JS**：Styled-components（可选）

### 8.4 GraphQL客户端
- **Apollo Client**：GraphQL客户端
- 或 **urql**：轻量级GraphQL客户端

### 8.5 UI组件库（可选）
- **Headless UI**：无样式组件
- **Radix UI**：可访问性组件
- 或自定义组件

### 8.6 工具库
- **date-fns**：日期格式化
- **clsx**：类名合并
- **react-markdown**：Markdown渲染（如果AI回复支持）

---

## 9. 组件清单

### 9.1 页面组件
- `App.tsx`：根组件
- `HomePage.tsx`：首页组件

### 9.2 布局组件
- `Header.tsx`：顶部导航
- `Footer.tsx`：页脚
- `Layout.tsx`：页面布局容器

### 9.3 Hero组件
- `HeroSection.tsx`：首屏区域

### 9.4 卡片组件
- `FeatureCard.tsx`：功能卡片
- `FeaturesSection.tsx`：功能区域容器

### 9.5 聊天组件
- `ChatButton.tsx`：悬浮按钮
- `ChatWindow.tsx`：聊天窗口容器
- `ChatHeader.tsx`：聊天窗口标题栏
- `MessageList.tsx`：消息列表
- `MessageBubble.tsx`：消息气泡
- `ChatInput.tsx`：输入区域
- `QuickReplies.tsx`：快捷回复（可选）

### 9.6 通用组件
- `Button.tsx`：按钮组件
- `Loading.tsx`：加载指示器
- `ErrorMessage.tsx`：错误提示

### 9.7 GraphQL相关
- `graphql/client.ts`：GraphQL客户端配置
- `graphql/queries.ts`：查询定义
- `graphql/mutations.ts`：变更定义

---

## 10. 数据流设计

### 10.1 状态管理结构
```typescript
// 全局状态（Context）
interface AppState {
  chatWindow: {
    isOpen: boolean;
    messages: Message[];
    isLoading: boolean;
    error: string | null;
  };
}

// 消息类型
interface Message {
  id: string;
  role: 'user' | 'assistant' | 'system';
  content: string;
  timestamp: Date;
}
```

### 10.2 GraphQL Schema（前端期望）
```graphql
type Mutation {
  sendMessage(content: String!): MessageResponse!
}

type MessageResponse {
  id: ID!
  userMessage: String!
  aiResponse: String!
  timestamp: String!
}
```

---

## 11. 开发里程碑（60分钟快速开发）

> **说明：** 借助 Cursor AI 等工具，开发时间大幅缩短。以下时间分配基于 AI 辅助开发场景。

### Phase 1: 项目初始化与基础搭建（10分钟）
- [ ] 项目初始化（React + TypeScript + Vite）- 3分钟
- [ ] 设计系统配置（Tailwind CSS + 颜色变量）- 2分钟
- [ ] 基础布局组件（Header、Footer、Layout）- 3分钟
- [ ] 项目结构搭建 - 2分钟

### Phase 2: 首页核心组件（15分钟）
- [ ] Hero Section 组件开发 - 5分钟
- [ ] Features Section 卡片组件 - 5分钟
- [ ] 响应式布局适配 - 3分钟
- [ ] 基础动画效果 - 2分钟

### Phase 3: 聊天窗口核心功能（20分钟）
- [ ] 悬浮按钮组件 - 3分钟
- [ ] 聊天窗口容器与标题栏 - 4分钟
- [ ] 消息列表和气泡组件 - 5分钟
- [ ] 输入区域组件 - 4分钟
- [ ] 打开/关闭动画和状态管理 - 4分钟

### Phase 4: GraphQL集成与功能完善（10分钟）
- [ ] GraphQL客户端配置（Apollo/urql）- 3分钟
- [ ] 消息发送逻辑和状态管理 - 4分钟
- [ ] 错误处理和加载状态 - 2分钟
- [ ] 本地存储（对话历史）- 1分钟

### Phase 5: 部署与CI/CD（5分钟）
- [ ] Cloudflare Pages配置 - 2分钟
- [ ] GitHub Actions CI/CD配置 - 2分钟
- [ ] 域名绑定（antech.store）- 1分钟

**总计：60分钟**

**开发策略：**
- 使用 Cursor AI 生成基础组件代码
- 并行开发多个组件
- 优先实现核心功能，细节优化后续迭代
- 利用 AI 快速生成样式和布局代码

---

## 12. 验收标准

### 12.1 功能验收
- ✅ 聊天窗口可以正常打开和关闭
- ✅ 消息可以正常发送和接收
- ✅ AI回复正确显示
- ✅ 错误情况有友好提示
- ✅ 对话历史可以保存和恢复

### 12.2 设计验收
- ✅ 符合BetterHelp设计风格
- ✅ 色彩系统正确应用
- ✅ 响应式布局正常
- ✅ 动画流畅自然

### 12.3 性能验收
- ✅ 首屏加载 < 2秒
- ✅ 聊天窗口打开 < 300ms
- ✅ 动画60fps
- ✅ 移动端体验良好

### 12.4 兼容性验收
- ✅ Chrome、Firefox、Safari、Edge最新版本
- ✅ iOS Safari、Chrome Mobile
- ✅ 不同屏幕尺寸正常显示

---

## 13. 后续优化方向

### 13.1 功能增强
- 对话历史管理（查看历史对话）
- 多语言支持
- 语音输入（可选）
- 表情符号支持
- 文件上传（图片等）

### 13.2 体验优化
- 消息撤回功能
- 消息编辑功能
- 对话导出（PDF）
- 个性化设置（主题、字体大小）

### 13.3 数据分析
- 用户行为追踪（匿名）
- 对话质量评估
- A/B测试（不同UI方案）

---

## 附录

### A. 设计参考
- BetterHelp官网设计风格
- 专业心理辅导网站布局
- 现代聊天应用交互模式

### B. 技术文档
- React官方文档
- GraphQL最佳实践
- Cloudflare Pages部署指南

### C. 联系方式
- 项目负责人：[待填写]
- 设计负责人：[待填写]
- 开发负责人：[待填写]

---

**文档版本：** v1.0  
**最后更新：** 2024  
**维护者：** 开发团队

