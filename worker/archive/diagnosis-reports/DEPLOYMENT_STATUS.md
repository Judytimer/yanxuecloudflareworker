# Worker éƒ¨ç½²çŠ¶æ€æ£€æŸ¥æŠ¥å‘Š

## ğŸ“Š å½“å‰çŠ¶æ€

### âœ… éƒ¨ç½²æˆåŠŸç¡®è®¤

æ ¹æ®ä¹‹å‰çš„éƒ¨ç½²è¾“å‡ºï¼ŒWorker å·²æˆåŠŸéƒ¨ç½²ï¼š

```
Deployed antech-worker-production triggers (5.91 sec)
  api.antech.store (zone name: antech.store)
Current Version ID: 01956693-f1e4-47bb-ab05-2f5b18101378
```

**å…³é”®ä¿¡æ¯**ï¼š
- âœ… Worker å·²æˆåŠŸéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- âœ… è·¯ç”±å·²æˆåŠŸç»‘å®šï¼š`api.antech.store`
- âœ… ç‰ˆæœ¬ID: `01956693-f1e4-47bb-ab05-2f5b18101378`
- âœ… éƒ¨ç½²æ—¶é—´ï¼š2025-11-14

### âš ï¸ API æµ‹è¯•ç»“æœ

**å½“å‰çŠ¶æ€**ï¼šAPI ç«¯ç‚¹ `https://api.antech.store/graphql` ä»ç„¶æ— æ³•è®¿é—®

**é”™è¯¯ä¿¡æ¯**ï¼š
```
curl: (35) OpenSSL SSL_connect: SSL_ERROR_SYSCALL in connection to api.antech.store:443
```

## ğŸ” é—®é¢˜åˆ†æ

### å¯èƒ½çš„åŸå› 

1. **DNS/è·¯ç”±ä¼ æ’­å»¶è¿Ÿ** â°
   - Cloudflare è·¯ç”±é…ç½®éœ€è¦æ—¶é—´åŒæ­¥åˆ°å…¨çƒè¾¹ç¼˜èŠ‚ç‚¹
   - é€šå¸¸éœ€è¦ 5-30 åˆ†é’Ÿï¼Œæœ‰æ—¶å¯èƒ½éœ€è¦æ›´é•¿æ—¶é—´
   - ä¸åŒåœ°ç†ä½ç½®å¯èƒ½ç”Ÿæ•ˆæ—¶é—´ä¸åŒ

2. **ç½‘ç»œ/ä»£ç†é—®é¢˜** ğŸŒ
   - å½“å‰ç¯å¢ƒæ£€æµ‹åˆ°ä»£ç†é…ç½®ï¼ˆ172.20.160.1:7897ï¼‰
   - ä»£ç†å¯èƒ½å½±å“ SSL è¿æ¥
   - å»ºè®®ä»å…¶ä»–ç½‘ç»œç¯å¢ƒæµ‹è¯•

3. **è·¯ç”±ç»‘å®šçŠ¶æ€** ğŸ”—
   - è™½ç„¶éƒ¨ç½²æ—¶æ˜¾ç¤ºè·¯ç”±å·²ç»‘å®šï¼Œä½†éœ€è¦ç¡®è®¤ Cloudflare Dashboard ä¸­çš„å®é™…çŠ¶æ€
   - å¯èƒ½éœ€è¦æ‰‹åŠ¨éªŒè¯è·¯ç”±é…ç½®

## âœ… éªŒè¯æ­¥éª¤

### 1. æ£€æŸ¥ Cloudflare Dashboard

ç™»å½• https://dash.cloudflare.com å¹¶æ£€æŸ¥ï¼š

1. **Workers & Pages** â†’ **antech-worker**
   - ç¡®è®¤ Worker çŠ¶æ€ä¸º "Active"
   - æŸ¥çœ‹ **Routes** æ ‡ç­¾é¡µ
   - ç¡®è®¤ `api.antech.store` è·¯ç”±å·²ç»‘å®š
   - æ£€æŸ¥è·¯ç”±çŠ¶æ€æ˜¯å¦ä¸º "Active"

2. **DNS è®¾ç½®**
   - è¿›å…¥ **DNS** â†’ **Records**
   - æ£€æŸ¥ `api.antech.store` çš„ DNS è®°å½•
   - å¦‚æœä½¿ç”¨ Workers è·¯ç”±ï¼Œå¯èƒ½ä¸éœ€è¦å•ç‹¬çš„ DNS A è®°å½•

### 2. æµ‹è¯• APIï¼ˆå¤šç§æ–¹æ³•ï¼‰

**æ–¹æ³•1ï¼šæµè§ˆå™¨æµ‹è¯•**
```
è®¿é—®: https://api.antech.store/graphql
```
- å¦‚æœçœ‹åˆ° GraphQL ç›¸å…³çš„é”™è¯¯ä¿¡æ¯ â†’ Worker æ­£åœ¨è¿è¡Œ âœ…
- å¦‚æœå®Œå…¨æ— æ³•è¿æ¥ â†’ DNS/è·¯ç”±é—®é¢˜ âŒ

**æ–¹æ³•2ï¼šä½¿ç”¨ä¸åŒç½‘ç»œç¯å¢ƒ**
- ä»å…¶ä»–ç½‘ç»œï¼ˆå¦‚æ‰‹æœºçƒ­ç‚¹ï¼‰æµ‹è¯•
- ä½¿ç”¨åœ¨çº¿å·¥å…·ï¼ˆå¦‚ https://reqbin.com/ï¼‰æµ‹è¯•

**æ–¹æ³•3ï¼šæ£€æŸ¥ Worker æ—¥å¿—**
```bash
cd worker
npx wrangler tail
```
ç„¶åè®¿é—® APIï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰è¯·æ±‚æ—¥å¿—

### 3. ç­‰å¾…å¹¶é‡è¯•

å¦‚æœéƒ¨ç½²æ—¶é—´å°‘äº 30 åˆ†é’Ÿï¼Œå»ºè®®ï¼š
- ç­‰å¾… 15-30 åˆ†é’Ÿ
- é‡æ–°æµ‹è¯• API
- DNS/è·¯ç”±ä¼ æ’­å¯èƒ½éœ€è¦æ—¶é—´

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### å¦‚æœ API ä»ç„¶æ— æ³•è®¿é—®

1. **é‡æ–°éƒ¨ç½² Worker**
   ```bash
   cd worker
   npx wrangler deploy --env production
   ```
   ç¡®è®¤éƒ¨ç½²è¾“å‡ºä¸­æ˜¾ç¤ºè·¯ç”±å·²ç»‘å®š

2. **æ£€æŸ¥è·¯ç”±é…ç½®**
   ```bash
   cd worker
   cat wrangler.toml
   ```
   ç¡®è®¤ `[env.production]` ä¸­çš„è·¯ç”±é…ç½®æ­£ç¡®

3. **æ‰‹åŠ¨ç»‘å®šè·¯ç”±ï¼ˆå¦‚æœéœ€è¦ï¼‰**
   - åœ¨ Cloudflare Dashboard ä¸­
   - Workers & Pages â†’ antech-worker â†’ Routes
   - æ‰‹åŠ¨æ·»åŠ è·¯ç”±ï¼š`api.antech.store/*`

4. **æ£€æŸ¥ DNS é…ç½®**
   - ç¡®è®¤åŸŸå `antech.store` åœ¨ Cloudflare ä¸­
   - ç¡®è®¤ DNS è®°å½•æ­£ç¡®
   - å¦‚æœä½¿ç”¨ Workers è·¯ç”±ï¼Œç¡®ä¿åŸŸåå·²æ·»åŠ åˆ° Cloudflare

## ğŸ“ éƒ¨ç½²é…ç½®ç¡®è®¤

### å½“å‰é…ç½®

**wrangler.toml**:
```toml
[env.production]
routes = [
  { pattern = "api.antech.store", zone_name = "antech.store" }
]
```

**éƒ¨ç½²å‘½ä»¤**:
```bash
npx wrangler deploy --env production
```

**GitHub Actions**:
```yaml
command: deploy --env production
```

æ‰€æœ‰é…ç½®éƒ½å·²æ­£ç¡®è®¾ç½® âœ…

## ğŸ¯ å»ºè®®

1. **ç«‹å³æ“ä½œ**ï¼š
   - ç™»å½• Cloudflare Dashboard æ£€æŸ¥è·¯ç”±çŠ¶æ€
   - åœ¨æµè§ˆå™¨ä¸­æµ‹è¯• API ç«¯ç‚¹
   - æŸ¥çœ‹ Worker æ—¥å¿—

2. **ç­‰å¾…è§‚å¯Ÿ**ï¼š
   - å¦‚æœéƒ¨ç½²æ—¶é—´å°‘äº 30 åˆ†é’Ÿï¼Œç­‰å¾…è·¯ç”±ä¼ æ’­
   - 15-30 åˆ†é’Ÿåé‡æ–°æµ‹è¯•

3. **å¦‚æœé—®é¢˜æŒç»­**ï¼š
   - æ£€æŸ¥ Cloudflare Dashboard ä¸­çš„è·¯ç”±é…ç½®
   - ç¡®è®¤ DNS è®¾ç½®æ­£ç¡®
   - è€ƒè™‘è”ç³» Cloudflare æ”¯æŒ

## ğŸ“Š éƒ¨ç½²æ—¶é—´çº¿

- **2025-11-13 22:16** - åˆå§‹éƒ¨ç½²ï¼ˆæ— ç¯å¢ƒå‚æ•°ï¼‰
- **2025-11-14** - ä½¿ç”¨ `--env production` é‡æ–°éƒ¨ç½² âœ…
- **å½“å‰** - ç­‰å¾…è·¯ç”±/DNS ä¼ æ’­

## ğŸ”— ç›¸å…³èµ„æº

- Cloudflare Dashboard: https://dash.cloudflare.com
- Worker æ–‡æ¡£: https://developers.cloudflare.com/workers/
- è·¯ç”±æ–‡æ¡£: https://developers.cloudflare.com/workers/platform/routes/

